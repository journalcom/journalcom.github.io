<!DOCTYPE html>
<html>
<head>
    <title>31 March 2025 | Utkarsh</title>
    <link rel="stylesheet" href="../style.css">
    <style>
        body { 
            background: #000; 
            color: #DBDBDB;
            font-family: Arial, sans-serif;
            padding: 20px;
            line-height: 1.6;
        }
        .container { 
            max-width: 600px; 
            margin: 0 auto; 
            padding: 20px; 
            text-align: center;
        }
        #password-input { 
            background: #111; 
            color: #fff; 
            border: 1px solid #B38AFF;
            padding: 12px; 
            width: 80%; 
            margin: 15px 0;
            border-radius: 4px;
        }
        .unlock-btn {
            background: #B38AFF; 
            color: #000; 
            border: none;
            padding: 12px 25px; 
            cursor: pointer;
            border-radius: 4px;
            font-weight: bold;
            transition: all 0.3s;
        }
        .unlock-btn:hover {
            background: #9c72e6;
        }
        #secret-content { 
            display: none; 
            margin-top: 30px; 
            text-align: left;
        }
        #error { 
            color: #ff6b6b; 
            display: none; 
            margin-top: 10px;
        }
        .secret-box {
            background: #111;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #B38AFF;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="center-container">
        <header>
            <nav class="menu">
                <a href="../index.html">home</a>
                <a href="../about.html">contact</a>
            </nav>
        </header>
        <div class="secret-box">
            <div class="entry-date">✦ 31 March 2025 ✦</div>

        <div class="container">
            <h2>a spotify secret</h2>
            <div id="password-prompt">
                <p>enter password</p>
                <input type="password" id="password-input" placeholder="Password" autocomplete="off">
                <button class="unlock-btn" onclick="checkPassword()">unlock</button>
                <p id="error"></p>
            </div>
            
            <div id="secret-content">
            </div>
        </div>

        <footer style="text-align: center;">
            © 2025 Utkarsh Sonawane | All Rights Reserved
        </footer>
    </div>

    <script src="../script.js"></script>
    <script>
    const GIST_ID = "25b3da67deb9819628482ec9600a55b9";
    const PASSWORD_HASH = "78249574864982e970924440e4c422a926e09a9ed208b213d22e7fc9ffcfebb3"; // if you've come here either from inspect element or gone to my public repo, lemme tell you one thing its absolutely impossible to break this combination, coz it uses third party gi- wait why am i telling this?


    async function checkPassword() {
        const password = document.getElementById("password-input").value;
        const errorEl = document.getElementById("error");
        const contentEl = document.getElementById("secret-content");
        
        contentEl.innerHTML = "<p>Loading secrets...</p>";
        contentEl.style.display = "block";
        
        try {
            const hash = await sha256(password);
            
            if (hash === PASSWORD_HASH) {
                const response = await fetch(`https://gist.githubusercontent.com/raw/${GIST_ID}?t=${Date.now()}`);
                if (!response.ok) throw new Error("Failed to load content");
                
                contentEl.innerHTML = await response.text();
                errorEl.style.display = "none";
            } else {
                throw new Error("Incorrect password");
            }
        } catch (err) {
            contentEl.style.display = "none";
            errorEl.textContent = err.message;
            errorEl.style.display = "block";
        }
    }

    async function sha256(message) {
        const msgBuffer = new TextEncoder().encode(message);
        const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);
        const hashArray = Array.from(new Uint8Array(hashBuffer));
        return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
    }

    document.getElementById("password-input").addEventListener('keypress', function(e) {
        if (e.key === 'Enter') checkPassword();
    });
    </script>
</body>
</html>